services:
  portainer:
    image: docker.io/portainer/portainer-ce:2.38.0
    container_name: portainer
    restart: unless-stopped
    security_opt:
      # 禁用 SELinux 标签隔离，允许容器访问挂载的 socket
      - label=disable
    ports:
      # Edge Agent 通信端口
      - "8000:8000"
      # Web UI (HTTP)
      - "9000:9000"
      # Web UI (HTTPS) - 默认使用自签名证书
      - "9443:9443"
    volumes:
      - /run/podman/podman.sock:/var/run/docker.sock
      - portainer-data:/data
    networks:
      - portainer

volumes:
  portainer-data:
    name: portainer-data
    driver: local

networks:
  portainer:
    name: portainer
    driver: bridge
